/*!
  *  Name: AN Popup
  *  Description: AN Popup is a simple and lightweight jquery plugin that allows you to create a popup with multiple content type (Image, Video, Google Map, File, etc) and responsive.
  *  Author: Atas Nalar
  *  Version: 1.0.0
  *  License: GNU General Public License v3.0 or later
  *  License URI: http://www.gnu.org/licenses/gpl-3.0.html
*/
function ANPopUp(){$(".an-popup-btn").length>0&&($(".an-popup-btn").each((function(){var a=$(this).attr("href")||$(this).attr("src")||$(this).attr("data-image")||$(this).find("source").attr("src")||$(this).attr("data-video");$(this).on("click",(function(t){var e=$(this).data("downloadable");if(!0===e){var o='aria-label="Download"',i="download";void 0!==c&&""!==c&&(o='aria-label="'+c+'"',i='download="'+c+'"')}var p="";!0===e&&(p=" ms-auto");var n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="fill:currenColor;"><path d="M13 10H18L12 16L6 10H11V3H13V10ZM4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19Z"></path></svg>',s="";s=$(this).parents(".an-profile").length||$(this).parents(".an-avatar").length?'data-parent="an-profile"':$(this).parents(".an-card-action").length?'data-parent="an-card-action" data-card-id="'+$(this).parents(".an-card").attr("data-id")+'"':"";var r="javascript:void(0)";window.location.href.indexOf("/page/")>-1&&(r=window.location.origin);var l='<a href="'+r+'" class="readmore p-2 text-decoration-underline" '+s+">Read More</a>",d='<span class="an-popup-close'+p+'" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="fill:currenColor;"><path d="M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"></path></svg></span>';if(a){var c=$(this).parents(".an-card-body").find(".an-card-title").text()||$(this).attr("data-title")||$(this).attr("title");void 0!==c&&""!==c||(c=$(this).attr("alt")||$(this).attr("title")||""),c=c.charAt(0).toUpperCase()+c.slice(1);var u=$(this).parents(".an-card-body").find(".an-card-detail").html()||$(this).attr("data-description"),h='<div class="an-popup">';if(h+='<div class="an-popup-content">',h+='<div class="an-popup-header animated fadeInDown">',h+='<div class="an-popup-title-wrapper">',h+='<span class="an-popup-title excerpt">'+c+"</span>",h+="</div>",h+='<div class="an-popup-action ms-auto">',!0===e&&(h+='<a href="'+a+'" '+o+" "+i+">"+n+"</a>"),h+=d,h+="</div>",h+="</div>",h+='<div class="an-popup-body animated fadeIn">',h+='<div class="an-popup-body-inner">',"gallery"===$(this).parents(".an-card").attr("data-type")||$(this).parents(".an-popup-gallery").length){var m=[],v=[],g=[],f=[],y=".an-card-wrap";$(this).parents(".an-popup-gallery").length&&(y=".an-popup-gallery"),$(this).parents(y).find(".an-popup-btn").each((function(){var a=$(this).attr("src")||$(this).attr("href")||$(this).attr("data-image")||$(this).find("source").attr("src");m.push(a);var t=$(this).attr("alt")||$(this).attr("title")||"";v.push(t);var e=$(this).attr("data-description")||"";void 0!==e&&""!==e?g.push('data-description="'+e+'"'):g.push("");var o=$(this).attr("data-downloadable")||"";void 0!==o&&""!==o?f.push('data-downloadable="'+o+'"'):f.push("")})),h+='<div class="an-popup-gallery">',m.length>1&&(h+='<span class="an-popup-gallery-prev an-popup-nav-slider" aria-label="Previous"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="fill: currentColor;"><path d="M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"></path></svg></span>',$(".an-popup-title-wrapper").append('<div class="an-popup-gallery-counter">(<span class="an-popup-gallery-counter-current"></span>/<span class="an-popup-gallery-counter-total">'+m.length+"</span>)</div>")),h+='<div class="an-popup-gallery-inner">';for(var w=0;w<m.length;w++){v[w]=v[w].charAt(0).toUpperCase()+v[w].slice(1),m[w]===a&&v[w]===c?(h+='<div class="an-popup-gallery-item active">',$(".an-popup-gallery-counter-current").text(w+1)):h+='<div class="an-popup-gallery-item">';var b="";fileExists(m[w])||(b=' style="width: 150px;height: 150px;"',v[w]="Image not found",g[w]="",f[w]=""),h+='<img src="'+m[w]+'" alt="'+v[w]+'" '+g[w]+" "+f[w]+b+">",h+="</div>"}h+="</div>",m.length>1&&(h+='<span class="an-popup-gallery-next an-popup-nav-slider" aria-label="Next"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="fill: currentColor;"><path d="M13.1714 12.0007L8.22168 7.05093L9.63589 5.63672L15.9999 12.0007L9.63589 18.3646L8.22168 16.9504L13.1714 12.0007Z"></path></svg></span>'),h+="</div>"}else if("video"===$(this).parents(".an-card").attr("data-type")){$(this).parents(".an-card").find(".an-video").each((function(){$(this).get(0).pause(),$(this).get(0).currentTime=0,$(this).get(0).load(),$(this).siblings(".an-video-play-btn").fadeIn("fast"),$(this).siblings(".an-video-stop-btn").fadeOut("fast").removeClass("played")}));var x=$(this).closest(".an-card").find(".an-card-wrap").find(".an-video").clone();if("true"===$(this).closest(".an-card").find(".an-card-wrap").attr("data-play-hover")&&x.attr("autoplay",""),x.attr("controls")||x.attr("controls",""),x.hasClass("has-autoplay")&&(x.removeClass("has-autoplay"),x.attr("autoplay","")),void 0!==x.attr("muted")&&x.removeAttr("muted"),h+='<div class="an-popup-video">',void 0!==$(this).closest(".an-card").find(".an-card-wrap").attr("data-popup-source")&&""!==$(this).closest(".an-card").find(".an-card-wrap").attr("data-popup-source")){var C=$(this).closest(".an-card").find(".an-card-wrap").attr("data-popup-source");if(C&&C.match(/youtube/g)||C&&C.match(/youtu.be/g))C.match(/youtu.be/g)&&(C=C.replace("youtu.be/","youtube.com/embed/")),C.match(/watch/g)&&(C=C.replace("watch?v=","embed/")).match(/list=/g)&&(C=C.replace("embed/","embed/videoseries?si=")),C.match(/playlist/g)&&(C=C.replace("playlist?list=","embed/videoseries?list=")),$(this).closest(".an-card").find(".an-card-wrap").children().hasClass("has-autoplay")&&(C.match(/\?/g)?C+="&autoplay=1":C+="?autoplay=1"),C.match(/origin=/g)||(C=C.match(/\?/g)?C+"&origin="+window.location.origin:C+"?origin="+window.location.origin),""===c&&(c="Youtube Video"),h+='<iframe src="'+C+'" title="'+c+'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>';else if(C.match(/vimeo/g)){var L=C.split("/").pop();(C="https://player.vimeo.com/video/"+L).match(/autoplay=/g)||(C.match(/\?/g)?C+="&autoplay=1":C+="?autoplay=1"),""===c&&(c="Vimeo Video"),h+='<div class="an-popup-video">',h+='<iframe src="'+C+'" title="'+c+'" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',h+="</div>"}else if(fileExists(C)){x.find("source").length>1&&x.find("source:not(:first-child)").remove();var T=C.split(".").pop();x.find("source").attr("type","video/"+T),x.find("source").attr("src",C),h+=x[0].outerHTML}else h+='<div class="an-popup-content-not-supported">Source Video not found!</div>'}else fileExists(x.find("source").attr("src")||x.find("source").attr("data-src")||x.attr("src")||x.attr("data-src"))?h+=x[0].outerHTML:h+='<div class="an-popup-content-not-supported">Source Video not found!</div>';h+="</div>"}else if(a.match(/\.(mp4|ogg|ogv|webm)/g))if(fileExists(a)){"ogv"===(T=a.split(".").pop())&&(T="ogg");var V="";!1===e&&(V=' controlsList="nodownload"'),h+='<div class="an-popup-video">',h+="<video controls autoplay muted"+V+">",h+='<source src="'+a+'" type="video/'+T+'">',h+="Your browser does not support the video element.",h+="</video>",h+="</div>"}else h+='<div class="an-popup-content-not-supported">Source Video not found!</div>';else if(a.match(/youtu.be/g)||a.match(/youtube/g))a.match(/youtu.be/g)&&(a=a.replace("youtu.be/","youtube.com/embed/")),a.match(/watch/g)&&(a=a.replace("watch?v=","embed/")).match(/list=/g)&&(a=a.replace("embed/","embed/videoseries?si=")),a.match(/playlist/g)&&(a=a.replace("playlist?list=","embed/videoseries?list=")),a.match(/autoplay=/g)||(a.match(/\?/g)?a+="&autoplay=1":a+="?autoplay=1"),a.match(/origin=/g)||(a=a.match(/\?/g)?a+"&origin="+window.location.origin:a+"?origin="+window.location.origin),""===c&&(c="Youtube Video"),h+='<div class="an-popup-video">',h+='<iframe src="'+a+'" title="'+c+'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>',h+="</div>";else if(a.match(/vimeo/g)){L=a.split("/").pop();(a="https://player.vimeo.com/video/"+L).match(/autoplay=/g)||(a.match(/\?/g)?a+="&autoplay=1":a+="?autoplay=1"),""===c&&(c="Vimeo Video"),h+='<div class="an-popup-video">',h+='<iframe src="'+a+'" title="'+c+'" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',h+="</div>"}else if(a.match(/maps/i)&&a.match(/google/i)||a.match(/maps.app.goo.gl/g)){a.match(/z=/g)||(a.match(/\?/g)?a+="&z=15":a+="?z=15"),""===c&&(c="Google Map"),h+='<div class="an-popup-google-map">',h+='<iframe src="'+a+'" title="'+c+'" frameborder="0" height="400" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>',h+="</div>"}else if(a.match(/#/g)){h+='<div class="an-popup-file-content">',h+='<div class="an-popup-file-content-inner"></div>',h+="</div>";var j=$(".an-popup-file-content-inner"),k=a.split("#").pop();if(j.html('<div class="an-popup-file-content-loading"><span class="an-loading-icon" role="status" aria-hidden="true">Loading...</span></div>'),$("#"+k).length){var H=$("#"+k).clone();j.html(H),H.removeClass("an-hidden-target"),setTimeout((function(){$("body").find("#"+k).not(H).replaceWith('<div id="'+k+'-hidden" class="an-hidden-target"></div>'),$(".an-popup-footer").remove()}),100),$(document).on("click",".an-popup-close",(function(){H.addClass("an-hidden-target"),$("#"+k+"-hidden").replaceWith(H)})),$(document).on("click",".an-popup",(function(a){$(a.target).closest(".an-popup-content").length||(H.addClass("an-hidden-target"),$("#"+k+"-hidden").replaceWith(H))}))}else j.html('<div class="an-popup-file-content-not-found">File Content not found!</div>')}else if(a.match(/\.(html|txt|md|json|js|css|scss|jsx|ts|tsx|xml)/g)){h+='<div class="an-popup-file-content">',h+='<div class="an-popup-file-content-inner"></div>',h+="</div>";j=$(".an-popup-file-content-inner");var M,O=$(this).attr("data-target-content"),E=a.split(".").pop();(M=new XMLHttpRequest).onreadystatechange=function(){if(4===this.readyState){j.html('<div class="an-popup-file-content-loading"><span class="an-loading-icon" role="status" aria-hidden="true">Loading...</span></div>');var t=this.responseText;if(void 0===O&&!a.match(/\.(txt|md|json|js|css|scss|jsx|ts|tsx|xml)/g))return j.html("target content is empty"),!1;if(void 0===O||""===O||a.match(/\.(txt|md|json|js|css|scss|jsx|ts|tsx|xml)/g)||(t=$(t).find(O).html()||$(t).filter(O).html()),200===this.status){var e="";a.match(/\.(md|json|js|css|scss|jsx|ts|tsx|xml)/g)?(e='<pre class="pre-blocks"><code class="language-'+E+'">'+t+"</code></pre>",j.html(e)):j.html(t)}404===this.status&&j.html('<div class="an-popup-file-content-not-found">File Content not found!</div>')}},M.open("GET",a,!0),M.send()}else a.match(/\.(jpe?g|png|gif|svg|webp|bmp|ico)/g)||a.match(/data:image/g)||a.match(/blob:/g)||a.match(/base64/g)||a.match(/unsplash/g)||a.match(/pexel/g)?(h+='<div class="an-popup-image">',h+='<img src="'+a+'" alt="'+c+'">',h+="</div>"):h+='<div class="an-popup-content-not-supported">Source not found/supported!</div>';if(h+="</div>",h+="</div>",void 0!==u&&""!==u&&(h+='<div class="an-popup-footer animated fadeInUp">',h+='<div class="an-popup-description">',h+='<small class="excerpt-2 fs-sm">'+(u=u.match(/<a/g)?u.replace(/(<([^>]+)>)/gi,(function(a,t){return/<a/g.test(t)?a:""})):u.replace(/(<([^>]+)>)/gi,""))+"</small>",h+="</div>",u.length>130&&(h+=l),h+="</div>"),h+="</div>",h+="</div>",a.match(/youtube/g)&&a.match(/youtu.be/g)&&a.match(/vimeo/g)||fileExists(a)||($(".an-popup-title-wrapper").remove(),$(".an-popup-footer").remove(),$(".an-popup-action [download]").remove(),$(".an-popup-image").css("max-height","300px"),$(".an-popup-image").find("img").css("aspect-ratio",1)),!$(".an-popup").length){$("body").append(h),$(".an-popup").addClass("an-popup-show"),$("body").addClass("an-popup-open");var A=$(".an-popup-title"),D=$(".an-popup-footer"),I=$(".an-popup-action");$(".an-popup-video").length&&$("audio.active").each((function(){this.paused||this.pause()})),$(".an-popup-gallery-prev").on("click",(function(){var a=$(".an-popup-gallery-item.active"),t=a.prev(".an-popup-gallery-item");0===t.length&&(t=$(".an-popup-gallery-item:last"));var e=t.find("img").attr("alt"),o=t.find("img").attr("data-description"),i=t.find("img").attr("data-downloadable"),p=t.find("img").attr("src");if(a.removeClass("active"),A.text(e),D.html(""),void 0!==o&&""!==o&&(o=o.match(/<a/g)?o.replace(/(<([^>]+)>)/gi,(function(a,t){return/<a/g.test(t)?a:""})):o.replace(/(<([^>]+)>)/gi,""),D.append('<div class="an-popup-description"><small class="excerpt-2 fs-sm">'+o+"</small></div>"),o.length>130&&D.find(".an-popup-description").append(l)),I.html(""),void 0!==i&&""!==i&&"true"===i){var s='aria-label="Download"',r="download";void 0!==e&&""!==e&&(s='aria-label="'+e+'"',r='download="'+e+'"'),I.append('<a href="'+p+'" '+s+" "+r+">"+n+"</a>")}I.append(d),$(".an-popup-gallery-counter-current").text(t.index()+1),t.addClass("active")})),$(".an-popup-gallery-next").on("click",(function(){var a=$(".an-popup-gallery-item.active"),t=a.next(".an-popup-gallery-item");0===t.length&&(t=$(".an-popup-gallery-item:first"));var e=t.find("img").attr("alt"),o=t.find("img").attr("data-description"),i=t.find("img").attr("data-downloadable"),p=t.find("img").attr("src");if(a.removeClass("active"),A.text(e),D.html(""),void 0!==o&&""!==o&&(o=o.match(/<a/g)?o.replace(/(<([^>]+)>)/gi,(function(a,t){return/<a/g.test(t)?a:""})):o.replace(/(<([^>]+)>)/gi,""),D.append('<div class="an-popup-description"><small class="excerpt-2 fs-sm">'+o+"</small></div>"),o.length>130&&D.find(".an-popup-description").append(l)),I.html(""),void 0!==i&&""!==i&&"true"===i){var s='aria-label="Download"',r="download";void 0!==e&&""!==e&&(s='aria-label="'+e+'"',r='download="'+e+'"'),I.append('<a href="'+p+'" '+s+" "+r+">"+n+"</a>")}I.append(d),$(".an-popup-gallery-counter-current").text(t.index()+1),t.addClass("active")}))}}t.preventDefault()}))})),$(document).on("click",".an-popup-close",(function(){$("body").removeClass("an-popup-open"),$(".an-popup").addClass("animated fadeOut"),setTimeout((function(){$(".an-popup").removeClass("an-popup-show").remove()}),500)})),$(document).on("click",".readmore",(function(){var a=$(this).data("parent");if($("body").removeClass("an-popup-open"),$(".an-popup").addClass("animated fadeOut"),setTimeout((function(){$(".an-popup").removeClass("an-popup-show").remove()}),500),"an-profile"===a)$("section#about").length?$("html, body").scrollTop($("section#about").offset().top-initialOffset):window.location.href.indexOf("/page/")>-1?window.location.href=$(this).attr("href"):$("html, body").scrollTop(0);else if("an-card-action"===a){var t=$(this).data("card-id");$('.an-card[data-id="'+t+'"]').find(".an-card-link").each((function(){void 0!==$(this).attr("href")&&""!==$(this).attr("href")?window.location.href=$(this).attr("href"):($(this).trigger("click"),$("#an-modal").modal("show"))}))}else $("html, body").scrollTop(0);return!1})),$(document).on("click",".an-popup-content a[data-target]",(function(){$("body").removeClass("an-popup-open"),$(".an-popup").addClass("animated fadeOut"),setTimeout((function(){$(".an-popup").removeClass("an-popup-show").remove()}),500);var a=$(this).data("target");return $("#"+a).length?$("html, body").scrollTop($("#"+a).offset().top-initialOffset):$("html, body").scrollTop(0),!1})),$(document).on("click",".an-popup",(function(a){$(a.target).closest(".an-popup-content").length||($("body").removeClass("an-popup-open"),$(".an-popup").addClass("animated fadeOut"),setTimeout((function(){$(".an-popup").removeClass("an-popup-show").remove()}),500))})))}ANPopUp();
